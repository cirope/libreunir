$('#schedule_modal').modal('hide');

var days = <%== @days %>;
$('[data-calendar-month]').datepicker({
    beforeShowDay: function(date){
      return [
        true, 
        $.inArray($.datepicker.formatDate('yy-mm-dd', date), days) != -1 ? 'has_event' : ''
      ]
    },
    onSelect: function(date, obj){
      $.getScript('/schedules/search?date='+date);
    },
    onChangeMonthYear: function(year, month, obj){
      var date = new Date(year, month-1, 1);
      $.getScript('/schedules?date='+date.toISOString().substring(0, 10));
    }
}).datepicker('refresh');

$('[data-calendar-day]').html('<%= j render('schedules_day') %>');
$('[data-loading]').remove();

Inspector.instance().reload();
