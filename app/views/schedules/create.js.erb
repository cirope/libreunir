<% if @schedule.persisted? %>
  $('[data-object-id="<%= @schedulable.to_param %>"]').remove();
  $('#schedulable-id-<%= @schedulable.to_param %>').remove();
<% else %>
  $('#new_schedule_<%= @schedulable.to_param %>').replaceWith(
    '<%= j render(template: 'schedules/new', formats: [:html]) %>'
  );

  $('[data-datetime-picker-id=<%= @schedulable.to_param %>]').datetimepicker({
    altField: '#datetime-picker-id-<%= @schedulable.to_param %>',
    showButtonPanel: false,
    altFieldTimeOnly: false,
    minDateTime: new Date("<%= l 10.minutes.from_now, format: :datetime %>")
  }).datetimepicker(
    "setDate", '<%= l @schedule.scheduled_at, format: :minimal %>'
  );
<% end %>
