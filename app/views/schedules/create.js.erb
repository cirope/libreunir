<% if @schedulable %>
  <% if @schedule.persisted? %>
    $('[data-object-id="<%= @schedulable.to_param %>"]').addClass('warning');
    $('[data-schedulable-id="<%= @schedulable.to_param %>"]').remove();
  <% else %>
    $('[data-schedulable-id="<%= @schedulable.to_param %>"]').find('form').replaceWith(
      '<%= j render(template: 'schedules/new', formats: [:html]) %>'
    );
    <%= render 'datepicker_setup' %>
  <% end %>
<% else %>
  $('[data-schedule-modal]').find('form').replaceWith(
    '<%= j render(template: 'schedules/new', formats: [:html]) %>'
  );
  <%= render 'datepicker_setup' %>
<% end %>
