$('[data-schedulable]').remove();

<% if @schedulable %>
  $('[data-object-id="<%= @schedulable.to_param %>"]').after(
    '<%= j render(
      "#{@schedulable.class.name.underscore}_template",
      content: render(template: 'schedules/new', formats: [:html])
    ) %>'
  );
<% else %>
  $('[data-new-schedule-place-holder]').html(
    '<%= j render(template: 'schedules/new', formats: [:html]) %>'
  );
<% end %>

$('[data-datetime-picker-id="<%= @schedulable.to_param %>"]').datetimepicker({
  altField: '#datetime-picker-id-<%= @schedulable.to_param %>',
  showButtonPanel: false,
  altFieldTimeOnly: false,
  minDateTime: new Date("<%= l 10.minutes.from_now, format: :datetime %>")
}).datetimepicker(
  "setDate", '<%= l @schedule.scheduled_at, format: :minimal %>'
);
